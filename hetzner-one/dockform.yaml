docker:
  context: hetzner-one
  identifier: homeserver

sops:
  age:
    key_file: ${AGE_KEY_FILE}

secrets:
  sops:
    - secrets.env

stacks:
  paperless:
    root: ./paperless
    secrets:
      sops:
        - secrets.env
  homepage:
    root: ./homepage
  n8n:
    root: ./n8n

filesets:
  homepage:
    source: ./homepage/config
    target_volume: homepage
    target_path: /app/config
    restart_services:
      - homepage

volumes:
  paperless-data:
  paperless-media:
  paperless-export:
  paperless-consume:
  paperless-redis:
  n8n_data:
