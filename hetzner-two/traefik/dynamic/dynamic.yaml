http:
  routers:
    # ============================================
    # PRIVATE SERVICES - Tailnet only (high priority)
    # ============================================
    
    # --- Traefik Dashboard ---
    traefik-dashboard:
      rule: "Host(`traefik.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: api@internal
      priority: 100
      tls: {}

    # --- Docker services on this host ---
    beszel:
      rule: "Host(`beszel.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: beszel@docker
      priority: 100
      tls: {}

    bitwarden:
      rule: "Host(`bitwarden.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: bitwarden@docker
      priority: 100
      tls: {}

    glance:
      rule: "Host(`home.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: glance@docker
      priority: 100
      tls: {}

    uptime:
      rule: "Host(`uptime.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: uptime@docker
      priority: 100
      tls: {}

    # --- External services (on 10.0.0.3) ---
    paperless:
      rule: "Host(`paperless.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: paperless
      priority: 100
      tls: {}

    linkwarden:
      rule: "Host(`linkwarden.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: linkwarden
      priority: 100
      tls: {}

    papra:
      rule: "Host(`papra.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: papra
      priority: 100
      tls: {}

    cloudreve:
      rule: "Host(`files.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: cloudreve
      priority: 100
      tls: {}

    code:
      rule: "Host(`code.gustavocastro.com`) && ClientIP(`100.64.0.0/10`)"
      entryPoints:
        - websecure
      service: code
      priority: 100
      tls: {}

    # ============================================
    # CATCH-ALL - Placeholder for all other subdomains
    # Matches *.gustavocastro.com (excludes apex and www which are public)
    # ============================================
    placeholder-catchall:
      rule: "HostRegexp(`^.+\\.gustavocastro\\.com$`)"
      entryPoints:
        - websecure
      service: placeholder-public@docker
      priority: 1
      tls: {}

  # ============================================
  # SERVICES - Only external backends defined here
  # Docker services use @docker suffix automatically
  # ============================================
  services:
    paperless:
      loadBalancer:
        servers:
          - url: "http://10.0.0.3:8000"
    linkwarden:
      loadBalancer:
        servers:
          - url: "http://10.0.0.3:3001"
    papra:
      loadBalancer:
        servers:
          - url: "http://10.0.0.3:1221"
    cloudreve:
      loadBalancer:
        servers:
          - url: "http://10.0.0.3:5212"
    code:
      loadBalancer:
        servers:
          - url: "http://10.0.0.4:8080"